-- -------------------------------------------------------------
-- 宠物管理平台 (petweb) 示例数据填充脚本
-- 描述: 该脚本为所有表插入一些初始的、有关联的示例数据。
-- 前提: 请先执行数据库结构创建脚本。
-- -------------------------------------------------------------

-- 使用数据库
USE `petweb`;

-- 为了让包含中文的脚本正确执行，设置客户端字符集
SET NAMES utf8mb4;

-- 使用事务，确保所有数据要么全部插入成功，要么全部失败
START TRANSACTION;

-- ----------------------------
-- 1. 插入用户数据
-- 假设ID将从1开始自动递增
-- ----------------------------
INSERT INTO `users` (`username`, `password`, `email`, `phone_number`, `nickname`, `avatar_url`) VALUES
('hsy', '666666', '2534729810@qq.com', '15736617118', '铲屎官红烧鱼', 'https://i.pravatar.cc/150?u=hsy'),
('test', '111111', 'test@example.com', '15736617111', '铲屎官小红', 'https://i.pravatar.cc/150?u=hong');

-- ----------------------------
-- 2. 插入宠物数据
-- user_id=1 对应 小明, user_id=2 对应 小红
-- 假设宠物ID将从1开始自动递增
-- ----------------------------
INSERT INTO `pets` (`user_id`, `name`, `species`, `breed`, `gender`, `birth_date`, `avatar_url`, `notes`) VALUES
(1, '旺财', '狗', '金毛寻回犬', 'male', '2022-01-15', 'https://placedog.net/500/500?id=1', '一只非常温顺、聪明的狗狗，喜欢玩飞盘。'),
(1, '咪咪', '猫', '英国短毛猫', 'spayed', '2021-05-20', 'https://placekitten.com/500/500?image=1', '高冷的蓝猫公主，喜欢晒太阳和睡觉。'),
(2, '豆豆', '猫', '布偶猫', 'neutered', '2023-03-10', 'https://placekitten.com/500/500?image=5', '活泼粘人的小帅哥，家里的小跟屁虫。');

-- ----------------------------
-- 3. 插入健康记录
-- pet_id=1 对应 旺财, pet_id=2 对应 咪咪, pet_id=3 对应 豆豆
-- ----------------------------
INSERT INTO `health_records` (`pet_id`, `record_type`, `title`, `description`, `record_date`, `vet_clinic`, `next_due_date`) VALUES
(1, 'vaccination', '狂犬疫苗接种', '进口卫佳捌疫苗，身体状况良好。', '2023-04-01', '爱心宠物医院', '2024-04-01'),
(1, 'deworming', '体内外驱虫', '使用了福来恩和拜宠清，无不良反应。', '2024-03-15', '家中处理', '2024-04-15'),
(2, 'vet_visit', '年度体检', '血常规正常，各项指标健康，医生建议控制体重。', '2024-02-20', '中心宠物医院', NULL),
(3, 'vaccination', '猫三联第二针', '妙三多疫苗，接种后留观30分钟无异常。', '2023-06-30', '爱心宠物医院', NULL);

-- ----------------------------
-- 4. 插入日程提醒
-- ----------------------------
INSERT INTO `reminders` (`pet_id`, `user_id`, `title`, `event_type`, `event_time`, `is_recurring`, `recurrence_rule`, `is_completed`) VALUES
(1, 1, '晚上带旺财出门散步', 'walking', '2024-05-20 20:00:00', 1, 'daily', 0),
(2, 1, '给咪咪喂化毛膏', 'medication', '2024-05-21 10:00:00', 0, NULL, 0),
(2, 1, '给咪咪剪指甲', 'grooming', '2024-05-18 15:00:00', 0, NULL, 1),
(3, 2, '补充猫粮和零食库存', 'other', '2024-05-25 12:00:00', 0, NULL, 0);

-- ----------------------------
-- 5. 插入社区帖子
-- 假设帖子ID将从1开始自动递增
-- ----------------------------
INSERT INTO `posts` (`user_id`, `title`, `content`, `image_urls`, `likes_count`, `comments_count`) VALUES
(1, '我家旺财学会握手了！', '太聪明了，今天下午教了十分钟就会了！录了个视频，给大家看看！', '["https://placedog.net/640/480?id=10", "https://placedog.net/640/480?id=11"]', 25, 2),
(2, '猫咪的迷惑睡姿大赏', '我家豆豆又解锁了新睡姿，感觉它的身体是液体的，笑死我了。大家也来分享一下你家主子的奇葩睡姿吧！', '["https://placekitten.com/640/480?image=15"]', 18, 1);

-- ----------------------------
-- 6. 插入帖子评论
-- post_id=1 对应 旺财的帖子, post_id=2 对应 豆豆的帖子
-- 假设评论ID将从1开始自动递增
-- ----------------------------
INSERT INTO `comments` (`post_id`, `user_id`, `parent_comment_id`, `content`) VALUES
-- 小红(user_id=2) 评论 小明(post_id=1) 的帖子
(1, 2, NULL, '哇，好聪明的狗狗！太可爱了！'),
-- 小明(user_id=1) 评论 小红(post_id=2) 的帖子
(2, 1, NULL, '哈哈，我家咪咪也这么睡！同款液体猫！'),
-- 小明(user_id=1) 回复 小红(comment_id=1) 的评论 (楼中楼)
(1, 1, 1, '谢谢夸奖！它可得意了！');

COMMIT;

-- ----------------------------
-- 脚本执行完毕
-- ----------------------------
SELECT '示例数据已成功插入到 `petweb` 数据库！' AS '状态';